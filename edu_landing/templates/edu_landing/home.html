{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ site_settings.site_name|default:"Education" }}</title>
    <link rel="stylesheet" href="{% static "css/home.css" %}">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    

    <nav class="nav">
        <div class="nav_left">
            {% if site_settings and site_settings.logo %}
            <img src="{{ site_settings.logo.url }}" alt="Logo" class="logo_img">
            {% else %}
            <div class="divider"></div>
            {% endif %}
            <div class="nav_links">
                <a href="{% url "home" %}" class="nav_links-a home-page">Home</a>
                <a href="{% url "courses" %}" class="nav_links-a">Courses</a>
                <a href="{% url "about" %}" class="nav_links-a">About</a>
            </div>
        </div>
        <div class="nav_right">
            <a href="/admin/" class="admin-link">Admin</a>
        </div>
    </nav>


    <main style="background-image: url('{% static "img/background_img.jpg" %}');">
        <div class="hero">
            <img src="{{ site_settings.logo.url }}" alt="Logo" class="logo">
            <div class="hero-text">
                <h1 class="hero-title">{{ site_settings.site_name }}</h1>
                <p class="hero-text-p" id="changing-text">{{ texts.0.text }}</p>
            </div>
        </div>
    </main>

    <section class="courses">
        <div class="course-grid">
            {% for course in courses %}
            <div class="course-card">
                <h3>{{ course.title }}</h3>
                <p>{{ course.short_description }}</p>
            </div>
            {% endfor %}
            <div class="course-card more-card">
                <a href="{% url "courses" %}">More...</a>
            </div>
        </div>
    </section>

    <section class="advantages">
        <div class="advantages-container">
            <h2>{{ home_texts.subtitle }}</h2>
            <p>{{ home_texts.text }}</p>
        </div>
    </section>

    <section class="faq">
        <h2>Часто задаваемые вопросы по курсам</h2>
        <div class="accordion">
            {% for course in courses %}
            <div class="accordion-item">
                <button class="accordion-header">{{ course.title }}</button>
                <div class="accordion-body">
                <p>{{ course.full_description }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>


    <script>
        const texts = [
        {% for t in texts %}
            "{{ t.text|escapejs }}"{% if not forloop.last %},{% endif %}
        {% endfor %}
        ];

        let index = 0;
        const changingText = document.getElementById('changing-text');

        function changeText() {
        // Сначала исчезновение текста
        changingText.style.opacity = 0;

        setTimeout(() => {
            // Меняем текст
            index = (index + 1) % texts.length;
            changingText.textContent = texts[index];

            // Появление текста
            changingText.style.opacity = 1;
        }, 1000); // совпадает с transition: opacity
        }

        // Смена каждые 10 секунд
        setInterval(changeText, 10000);

        window.addEventListener('scroll', function() {
        const scroll = window.pageYOffset;
        
        // Чем больше скролл, тем сильнее размытие (0–5px)
        // let blurValue = Math.min(scroll / 30, 5); // при 150px => 5px
        // document.body.style.filter = `blur(${blurValue}px)`;
        // });

        document.addEventListener("DOMContentLoaded", function() {
            const headers = document.querySelectorAll('.accordion-header');
  
            headers.forEach(header => {
                header.addEventListener('click', () => {
                    const body = header.nextElementSibling;
      
                    // Если аккордеон открыт — закрываем
                    if (body.style.maxHeight && body.style.maxHeight !== "0px") {
                        body.style.maxHeight = "0";
                        body.style.paddingTop = "0";
                        body.style.paddingBottom = "0";
                    } else {
                    // Закрываем все остальные аккордеоны (опционально, чтобы работал только один)
                    headers.forEach(h => {
                        const b = h.nextElementSibling;
                        b.style.maxHeight = "0";
                        b.style.paddingTop = "0";
                        b.style.paddingBottom = "0";
                    });
                    // Открываем текущий
                    body.style.maxHeight = body.scrollHeight + "px";
                    body.style.paddingTop = "15px";
                    body.style.paddingBottom = "15px";
                }
            });
        });
    });

    </script>


</body>
</html>